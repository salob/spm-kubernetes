{"version":3,"sources":["webpack:///./src/pages/runtime/jmx-statistics-performance-monitoring.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"wPAMaA,G,UAAe,IAOtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,8BACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,2CACA,sJACM,6BAAGC,WAAW,KAAQ,CACxB,KAAQ,8IADN,oBADN,UAIA,0DACA,8GACA,sBACE,kBAAIA,WAAW,MAAf,uBAA4C,6BAAGA,WAAW,MAAS,CAC/D,KAAQ,gJADgC,oCAA5C,8BAGqB,kBAAIA,WAAW,MAChC,kBAAIA,WAAW,MAAf,mIACA,kBAAIA,WAAW,MAAf,4JAGN,uIAAsH,6BAAGA,WAAW,KAAQ,CACxI,KAAQ,0JAD0G,uBAAtH,KAGA,wEACA,8NACA,6HACA,+FAA8E,0BAAYA,WAAW,KAAvB,+CAA9E,KACA,wHACA,2DACA,4MACA,iEAAgD,0BAAYA,WAAW,KAAvB,wDAAhD,qIAEA,uBAAK,gCAAMA,WAAW,OAAU,CAC5B,UAAa,mBADZ,+JAML,gFAA+D,0BAAYA,WAAW,KAAvB,uDAA/D,mHAEA,iIACA,qBAAG,sBAAQA,WAAW,KAAnB,gBAAgD,0BAAYA,WAAW,KAAvB,qFACnD,wCACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,kBAAsC,0BAAYA,WAAW,KAAvB,YAAtC,yKACA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,kIAGJ,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,+FAEF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,wEAA4F,0BAAYA,WAAW,KAAvB,oDAA5F,gFAEA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,WAAgC,0BAAYA,WAAW,MAAvB,0BAAhC,wCACA,kBAAIA,WAAW,MAAf,0DAA+E,0BAAYA,WAAW,MAAvB,oBAA/E,qFACA,kBAAIA,WAAW,MAAf,+BAAoD,0BAAYA,WAAW,MAAvB,0BAApD,0BAAkJ,0BAAYA,WAAW,MAAvB,6CAAlJ,sBACA,kBAAIA,WAAW,MAAf,WAAgC,0BAAYA,WAAW,MAAvB,sBAAhC,gIACA,kBAAIA,WAAW,MAAf,kEAGJ,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,0MACA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,gNAGJ,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,8GAAkI,0BAAYA,WAAW,KAAvB,QAAlI,KAAwL,0BAAYA,WAAW,KAAvB,QAAxL,SAAkP,0BAAYA,WAAW,KAAvB,QAAlP,WACA,kBAAIA,WAAW,MACb,kBAAIA,WAAW,MAAf,gIACA,kBAAIA,WAAW,MAAf,iFACA,kBAAIA,WAAW,MAAf,kCAAuD,0BAAYA,WAAW,MAAvB,aAAvD,oJAEF,mBAAKA,WAAW,MAAK,gCAAMA,WAAW,OAAU,IAA3B,qMAU7BJ,EAAWK,gBAAiB","file":"component---src-pages-runtime-jmx-statistics-performance-monitoring-mdx-0194bddeed095ff188aa.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/spm-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`What is Cúram JMX`}</h2>\n    <p>{`Cúram JMX is the system that provides operational data from a running Cúram application.JMX statistics as documented\nin this `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/support/knowledgecenter/SS8S5A_7.0.10/com.ibm.curam.content.doc/JMXAdministrator/ctr_CuramJMXAdministratorsGuide.html\"\n      }}>{`Knowledge Center`}</a>{` page.`}</p>\n    <h3>{`Cúram JMX Kubernetes Limitations`}</h3>\n    <p>{`Cúram JMX statistics behave similar in Kubernetes, but have the following limitation:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Access by using the `}<a parentName=\"li\" {...{\n          \"href\": \"https://www.ibm.com/support/knowledgecenter/SS8S5A_7.0.10/com.ibm.curam.content.doc/JMXAdministrator/c_JMXADMIN_Accessjmxstatsusingurl.html\"\n        }}>{`Cúram Administration Application`}</a>{`\nis not supported because:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Not all pods have the requisite Cúram client installed, which means JMS performance is unavailable using this access mechanism.`}</li>\n          <li parentName=\"ul\">{`The reverse proxy nature of Kubernetes means that even for the pods with clients installed, identifying the correct target server would be difficult.`}</li>\n        </ul></li>\n    </ul>\n    <p>{`Therefore, for Kubernetes you are restricted to using the timer-based access method, for more information, see `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/support/knowledgecenter/SS8S5A_7.0.10/com.ibm.curam.content.doc/JMXAdministrator/c_JMXADMIN_Accesstothejmxstatsusingjmxtimer.html\"\n      }}>{`Using the JMX Timer`}</a>{`.`}</p>\n    <h2>{`Cúram JMX timer-based statistics on Kubernetes`}</h2>\n    <p>{`This mechanism writes the JMX statistics periodically at a file system location. The advantage of this mechanism is that it can be used for collecting statistics from every server in an environment`}</p>\n    <p>{`The primary properties used to configure timer-based statistics are integrated into the Helm Charts.`}</p>\n    <p>{`A prerequisite for using timer-based SPM JMX statistics is to override `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.enabled=true`}</inlineCode>{`.`}</p>\n    <p>{`You must also consider the other persistence-related settings and configure them appropriately.`}</p>\n    <h3>{`Cúram JMX statistics persisteance`}</h3>\n    <p>{`Persistence is required for timer-based statistics because of the non-permanent nature of pods means that as they come and go, you might need statistics from an earlier execution.`}</p>\n    <p>{`Enable timer-based JMX statistics with a `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.jmxstats.enabled=true`}</inlineCode>{` override.\nOnce configured, the following SPM properties are added to the Liberty pod jvm.options files with the defaults shown:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`-Dcuram.jmx.output_statistics_timer_enabled=true\n-Dcuram.jmx.output_statistics_timer_folder=/tmp/jmx/\n-Dcuram.jmx.output_statistics_timer_period=60000\n`}</code></pre>\n    <p>{`You can override the value of the timer period by using `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.jmxstats.timerPeriod`}</inlineCode>{` where the value is specified as the\nnumber of milliseconds between each timer. For example, 60000 = 1 minute.`}</p>\n    <p>{`Inside the specified timer folder are the statistics XML files, named with a datetimestamp and pod name.`}</p>\n    <p><strong parentName=\"p\">{`For example:`}</strong><inlineCode parentName=\"p\">{`202009171025363411@bugsbunny-apps-curam-producer-6c9bf7dc46-snw4w-1661122509.xml`}</inlineCode></p>\n    <h2>{`Considerations`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The default of `}<inlineCode parentName=\"p\">{`1 minute`}</inlineCode>{` for the timer period might be too short because over an extended time, depending upon the amount of application activity, the persistent storage could be exhausted.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Consider also the length of time a pod will run; if the timer period is too short, data since the last timer period is lost.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`No timer-based statistics are generated until the first login or JMS message is processed.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Turn off statistics for running pods by editing the configmaps where `}<inlineCode parentName=\"p\">{`-Dcuram.jmx.output_statistics_timer_enabled=true`}</inlineCode>{` is set, changing the value to false, and restarting the pods.\nFor example:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Use the `}<inlineCode parentName=\"li\">{`kubectl get configmaps`}</inlineCode>{` command to list all the configmaps.`}</li>\n          <li parentName=\"ul\">{`The configmaps you need to change are those named with `}<inlineCode parentName=\"li\">{`*-jvm-override-*`}</inlineCode>{` and the number and names of the configmaps vary depending on your configuration.`}</li>\n          <li parentName=\"ul\">{`For each configmap, use the `}<inlineCode parentName=\"li\">{`kubectl edit configmap`}</inlineCode>{` command to change the `}<inlineCode parentName=\"li\">{`curam.jmx.output_statistics_timer_enabled`}</inlineCode>{` setting to false.`}</li>\n          <li parentName=\"ul\">{`Use the `}<inlineCode parentName=\"li\">{`kubectl delete pod`}</inlineCode>{` command for each of the application producer and consumer pods that have a corresponding application name to the configmap.`}</li>\n          <li parentName=\"ul\">{`On restart the new pod no longer generates statistics files.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`By default, statistics are accumulated over the life of a pod; therefore, the last file generated is superset of all the other files for that pod, therefore and you should only need the latest file.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`There is a property to change this behavior so each period resets the statistics, but then you would have to address how to amalgamate the data and make sense of it; so,changing this is not recommended.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`In support of EJB timers, IBM WebSphere Liberty dynamically creates three tables each time a pod starts; a `}<inlineCode parentName=\"p\">{`PART`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`PROP`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`TASK`}</inlineCode>{` table.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The amount of data in these tables is small; but, over time could result in a large number of these tables in your database.`}</li>\n          <li parentName=\"ul\">{`You should monitor these tables and drop those for pods that no longer exist.`}</li>\n          <li parentName=\"ul\">{`These tables are prefixed with `}<inlineCode parentName=\"li\">{`EJBTIMER_`}</inlineCode>{`, followed by the pod name. For example, for the bugsbunny-apps-curam-consumer deployment, the following three tables created for a single pod:`}</li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWPART\n  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWPROP\n  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWTASK\n`}</code></pre>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}