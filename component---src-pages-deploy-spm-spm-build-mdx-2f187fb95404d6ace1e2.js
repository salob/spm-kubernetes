(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{f6cq:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return u}));var a,r=n("wx14"),l=n("zLVn"),o=(n("q1tI"),n("7ljp")),i=n("013z"),c=(n("qKvR"),{}),b=(a="InlineNotification",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",e)}),p={_frontmatter:c},s=i.a;function u(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(o.b)(s,Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)(b,{mdxType:"InlineNotification"},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," Before proceeding with the following steps, ensure that the steps defined in ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/spm-kubernetes/deploy-spm/create_spm_db"}),"Create the SPM Database")," are completed. This action should be only a one-off set-up.")),Object(o.b)("p",null,"Building Social Program Management (SPM) for deployment to Kubernetes is similar to on-premises SPM builds with some differences.\nNotably, because the application server for the cloud environment is IBM® WebSphere® Liberty some target names are changed or are not supported."),Object(o.b)("p",null,"Take the following steps to build SPM:"),Object(o.b)("h2",null,"Source the SPM environment variables"),Object(o.b)("p",null,"Enter the directory where SPM is installed and source the SetEnvironment script; for example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"cd /opt/IBM/Curam/Development\n. SetEnvironment.sh\n")),Object(o.b)("h2",null,"Set up AppServer.properties and verify the configuration"),Object(o.b)("p",null,"Before you build SPM, add an ",Object(o.b)("inlineCode",{parentName:"p"},"AppServer.properties")," file to ",Object(o.b)("inlineCode",{parentName:"p"},"$SERVER_DIR/project/properties"),".  ",Object(o.b)("inlineCode",{parentName:"p"},"AppServer.properties")," must specify ",Object(o.b)("inlineCode",{parentName:"p"},"as.vendor=WLP"),"; for example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-properties"}),"# Property to indicate that WebSphere Liberty is installed\nas.vendor=WLP\n\n# The username and password for the administrator role\nsecurity.username=websphere\n# Encrypt the plain-text password using 'build encrypt -Dpassword=<password>'\n# Below is the encryption for the default password (\"websphere\")\nsecurity.password=XOVRjjVTebM8gV953LGMLQ==\n\n# The name of the server on which the application will be hosted\ncuram.server.name=CuramServer\nserver.name=CuramServer\n\n# The Curam client HTTP port\ncuram.client.httpport=10101\n\n# The Curam web service port\ncuram.webservices.httpport=10102\n\n# Required for Building CuramBIRTViewer.ear\ncuram.server.port=2809\n")),Object(o.b)("p",null,"To confirm your configuration, run the following commands:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"cd $SERVER_DIR\n./build.sh configtest\n")),Object(o.b)("h2",null,"Set up static content"),Object(o.b)("p",null,"The static content server feature allows static content to be hosted on a separate web server.\nThis feature allows the web server that hosts the static content to be tuned for the static content and reduces the load on the main SPM application servers.\nThe option enables the relocation of static content to a separate server to allow for performance optimizations."),Object(o.b)("p",null,"To enable static content, create a file called ",Object(o.b)("inlineCode",{parentName:"p"},"curam-config.xml")," in the following location ",Object(o.b)("inlineCode",{parentName:"p"},"$CLIENT_DIR/components/custom/"),"."),Object(o.b)("p",null,"Add the following to ",Object(o.b)("inlineCode",{parentName:"p"},"curam-config.xml"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="UTF-8"?>\n<APP_CONFIG>\n  <STATIC_CONTENT_SERVER>\n    <URL>/CuramStatic/</URL>\n  </STATIC_CONTENT_SERVER>\n</APP_CONFIG>\n')),Object(o.b)(b,{mdxType:"InlineNotification"},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," The guidelines assume that the relative URL /CuramStatic/ is being used")),Object(o.b)(b,{mdxType:"InlineNotification"},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," For more information, see Static Content Server in the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.ibm.com/support/knowledgecenter/SS8S5A_7.0.10/com.ibm.curam.content.doc/WebClientReference/r_WEBCREF_Development1Staticcontentserver1.html"}),"Knowledge Center"))),Object(o.b)("h2",null,"Build the SPM server"),Object(o.b)("p",null,"To build the SPM server, run the following command:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"./build.sh clean server\n")),Object(o.b)("h2",null,"Build the database"),Object(o.b)("p",null,"To build the database, run the following command:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"./build.sh database prepare.application.data\n")),Object(o.b)("h2",null,"Build the SPM client"),Object(o.b)("p",null,"To build the client, run the following commands:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"cd $CLIENT_DIR\n./build.sh clean client\n")),Object(o.b)("h2",null,"Build ",Object(o.b)("inlineCode",{parentName:"h2"},"StaticContent.zip")),Object(o.b)("p",null,"To build ",Object(o.b)("inlineCode",{parentName:"p"},"StaticContent.zip"),", run the following commands:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"cd $CLIENT_DIR\n./build.sh zip-static-content\n")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"StaticContent.zip")," file that is created is in the ",Object(o.b)("inlineCode",{parentName:"p"},"$CLIENT_DIR/build")," folder and is needed for the steps in\n",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/spm-kubernetes/build-images/setup_docker_context"}),"Setting up the Docker® context"),"."),Object(o.b)("h3",null,"Build the Cúram EAR files for WebSphere Liberty"),Object(o.b)("p",null,"Modify the ",Object(o.b)("inlineCode",{parentName:"p"},"requireServer")," setting in the ",Object(o.b)("inlineCode",{parentName:"p"},"$SERVER_DIR/project/config/deployment_packaging.xml")," file. This command works on multiple platforms:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),'sed -i \'s/name="Curam" requireServer="true"/name="Curam" requireServer="false"/g\' \\\n    $SERVER_DIR/project/config/deployment_packaging.xml\n')),Object(o.b)("p",null,"To build the application EAR files for WebSphere Liberty, run the following commands:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"cd $SERVER_DIR\n./build.sh libertyEAR -Dcuram.ejbserver.app.name=CuramServerCode\n./build.sh libertyEAR -Dserver.only=true \\\n                      -Dear.name=CuramServerCode \\\n                      -DSERVER_MODEL_NAME=CuramServerCode \\\n                      -Dcuram.ejbserver.app.name=CuramServerCode\n")),Object(o.b)("h2",null,"Package a release.zip file"),Object(o.b)("p",null,"To package the build into a ",Object(o.b)("inlineCode",{parentName:"p"},"release.zip")," file, run the following command:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"./build.sh release -Dcreate.zip=true\n")),Object(o.b)("p",null,"The .zip file that is created is in the ",Object(o.b)("inlineCode",{parentName:"p"},"$SERVER_DIR/release")," folder and is needed for the steps in\n",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"/spm-kubernetes/build-images/setup_docker_context"}),"Setting up the Docker environment"),"."),Object(o.b)(b,{mdxType:"InlineNotification"},Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," Please check the zip file in later stages that its integrity or size are un affected when copying to different directorys or machines."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," On OSX and Red Hat a zip file will end with .zip and look like a white file."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," On Windows a zip file is end with .zip and look like a folder.")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-deploy-spm-spm-build-mdx-2f187fb95404d6ace1e2.js.map