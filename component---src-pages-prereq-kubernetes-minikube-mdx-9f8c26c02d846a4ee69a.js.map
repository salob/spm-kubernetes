{"version":3,"sources":["webpack:///./src/pages/prereq/kubernetes/minikube.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","InlineNotification","Tabs","Tab","Row","Column","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","label","isMDXComponent"],"mappings":"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","file":"component---src-pages-prereq-kubernetes-minikube-mdx-9f8c26c02d846a4ee69a.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/spm-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst Row = makeShortcode(\"Row\");\nconst Column = makeShortcode(\"Column\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Minikube runs a single-node Kubernetes cluster inside a virtual machine (VM) on your laptop, for users who want to try out Kubernetes or develop with it.\nMinikube documentation is available at `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/setup/minikube/\"\n      }}>{`Installing Kubernetes with Minikube`}</a>{`.\nThe following sections are not a substitute for the official documentation but they get you started in a classic configuration.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` Minikube version used to verify this runbook: 1.12`}</p>\n    </InlineNotification>\n    <p>{`The following installation steps are described:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Installing Minikube`}</li>\n      <li parentName=\"ul\">{`Setting up the Docker® registry`}</li>\n      <li parentName=\"ul\">{`Configuring the hosts file for Minikube`}</li>\n      <li parentName=\"ul\">{`Starting Minikube`}</li>\n      <li parentName=\"ul\">{`Enabling Helm for Minikube`}</li>\n      <li parentName=\"ul\">{`A summary of some useful Minikube commands`}</li>\n    </ul>\n    <h2>{`Minikube installation`}</h2>\n    <p>{`Minikube installation steps are described in the official documentation for your preferred Operating System: `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/tasks/tools/install-minikube/\"\n      }}>{`Install Minikube`}</a>{`.`}</p>\n    <h2>{`Starting Minikube`}</h2>\n    <p>{`Minikube can be started with a command as simple as `}<inlineCode parentName=\"p\">{`minikube start`}</inlineCode>{` without any additional parameters. However, the resulting VM will be too small to deploy an instance of SPM, so several other parameters are required:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`minikube start --vm-driver=virtualbox --cpus 4 --memory 8G --insecure-registry \"192.168.0.0/16\" --disk-size='30G' --kubernetes-version v1.18.6\n`}</code></pre>\n    <p>{`Where `}<inlineCode parentName=\"p\">{`192.168.0.0/16`}</inlineCode>{` is the subnet that contains the IP address that is assigned to the Minikube VM. You can verify the IP address by using the `}<inlineCode parentName=\"p\">{`minikube ip`}</inlineCode>{` command.`}</p>\n    <p>{`The IP address might vary depending on your development environment. Therefore, start a Minikube instance to get the IP address and then delete it\nand restart it with the start command. See the note in `}<a parentName=\"p\" {...{\n        \"href\": \"#specifying-the-insecure-registry\"\n      }}>{`Specifying the insecure registry`}</a>{`.`}</p>\n    <h3>{`Specifying the resource allocation`}</h3>\n    <p>{`You can add properties to specify the resource allocation. For example:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--cpus 4`}</inlineCode>{` to use 4 CPUs`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--memory 8G`}</inlineCode>{` to use 8 GB of RAM`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--disk-size=30G`}</inlineCode>{` to use 30 GB of disk space`}</li>\n    </ul>\n    <h3>{`Specifying the VM driver`}</h3>\n    <p>{`Add the `}<inlineCode parentName=\"p\">{`--vm-driver=`}</inlineCode>{` option to the `}<inlineCode parentName=\"p\">{`minikube start`}</inlineCode>{` command to specify the underlying virtual machine driver. The following drivers were tested:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--vm-driver=virtualbox`}</inlineCode>{` - VirtualBox on OSX and Windows`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--vm-driver=vmware`}</inlineCode>{` - VMware Fusion on OSX`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`--vm-driver=none`}</inlineCode>{` - Minikube running directly on a Linux® node without virtualization (this is not recommended on personal workstations)`}</li>\n    </ul>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/tasks/tools/install-minikube/\"\n      }}>{`Install Minikube`}</a>{` page gives you more information on available VM driver options.`}</p>\n    <h3>{`Specifying the insecure registry`}</h3>\n    <p>{`You must specify the `}<inlineCode parentName=\"p\">{`--insecure-registry`}</inlineCode>{` option to reference the Docker registry that is created. The `}<inlineCode parentName=\"p\">{`--insecure-registry`}</inlineCode>{` value is the same as specified in the  `}<inlineCode parentName=\"p\">{`daemon.json`}</inlineCode>{` file.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` Because of a limitation in the current version of Minikube, adding the `}<inlineCode parentName=\"p\">{`--insecure-registry`}</inlineCode>{` option works on a new Minikube instance only.\nIf you start Minikube, be sure to run `}<inlineCode parentName=\"p\">{`minikube stop`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`minikube delete`}</inlineCode>{` before you start it again with the `}<inlineCode parentName=\"p\">{`--insecure-registry`}</inlineCode>{` option.`}</p>\n    </InlineNotification>\n    <h3>{`Specifying the Kubernetes version`}</h3>\n    <p>{`You can override the version of Kubernetes that gets installed inside the Minikube VM by using the `}<inlineCode parentName=\"p\">{`--kubernetes-version`}</inlineCode>{` flag. This flag controls the compatibility between the client tools and the Kubernetes specification.`}</p>\n    <p>{`If you override the Kubernetes version, ensure that you download and install the corresponding version of `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{` - this version must be the same version as the Kubernetes cluster.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` The `}<inlineCode parentName=\"p\">{`kubectl`}</inlineCode>{` version running locally and on Minikube should be compatible, so it’s possible to use the `}<inlineCode parentName=\"p\">{`--kubernetes-version`}</inlineCode>{` flag to keep them consistent.`}</p>\n    </InlineNotification>\n    <h2>{`Docker registry`}</h2>\n    <p>{`You need a registry to use docker images with Helm in Minikube.\nThere are different types of registries that can be used. However, this page describes a simple registry option that doesn’t require extra components.`}</p>\n    <p>{`Minikube provides an add-on to run a registry in a container. For more information, see `}<a parentName=\"p\" {...{\n        \"href\": \"https://minikube.sigs.k8s.io/docs/tasks/docker_registry/\"\n      }}>{`How to access the Docker registry within minikube`}</a>{`.`}</p>\n    <p>{`You can use the following command to enable the add-on:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`minikube addons enable registry\n`}</code></pre>\n    <p>{`When enabled, starting Minikube starts two pods on the `}<inlineCode parentName=\"p\">{`kube-system`}</inlineCode>{` namespace, named `}<inlineCode parentName=\"p\">{`registry`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`registry-proxy`}</inlineCode>{`. Now the registry is active and can be used. The registry points to the Minikube IP address on port 5000.`}</p>\n    <p>{`The containers don’t mount any volumes, so stopping Minikube deletes the registry content.`}</p>\n    <h2>{`Hostname configuration for Minikube`}</h2>\n    <p>{`This runbook uses a generic hostname of `}<inlineCode parentName=\"p\">{`minikube.local`}</inlineCode>{` as an example in commands and the configuration files.\nYou should add the Minikube IP address to the `}<inlineCode parentName=\"p\">{`hosts`}</inlineCode>{` file by using the generic hostname, or else modify the usage of `}<inlineCode parentName=\"p\">{`minikube.local`}</inlineCode>{` in this runbook to reflect your local hostname.`}</p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"Mac/Linux\" mdxType=\"Tab\">\n        <Row mdxType=\"Row\">\n          <Column mdxType=\"Column\">\n            <pre><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`echo -e \"$(minikube ip)\\\\tminikube.local\" | sudo tee -a /etc/hosts\n`}</code></pre>\n          </Column>\n        </Row>\n      </Tab>\n      <Tab label=\"Windows\" mdxType=\"Tab\">\n        <Row mdxType=\"Row\">\n          <Column mdxType=\"Column\">\n            <pre><code parentName=\"pre\" {...{\n                \"className\": \"language-powershell\"\n              }}>{`Add-Content -Path C:\\\\Windows\\\\System32\\\\drivers\\\\etc\\\\hosts -Value \"$(minikube ip)\\`tminikube.local\" -Force\n`}</code></pre>\n          </Column>\n        </Row>\n      </Tab>\n    </Tabs>\n    <p>{`Where `}<inlineCode parentName=\"p\">{`minikube ip`}</inlineCode>{` is the command that returns the Minikube VM’s IP address that is accessible from your workstation.`}</p>\n    <p>{`The local Docker client configuration must be also be updated with the corresponding IP address.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Update the `}<inlineCode parentName=\"li\">{`daemon.json`}</inlineCode>{` docker configuration file with the Minikube IP address. This file is usually located in:`}<ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`~/.docker/daemon.json`}</inlineCode>{` on OSX`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`/etc/docker/daemon.json`}</inlineCode>{` on Linux`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`C:\\\\ProgramData\\\\Docker\\\\config\\\\daemon.json`}</inlineCode>{` on Windows`}</li>\n        </ul></li>\n    </ul>\n    <p>{`Example of `}<inlineCode parentName=\"p\">{`daemon.json`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"insecure-registries\": [\n    \"192.168.0.0/16\"\n  ]\n}\n`}</code></pre>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` You can provide a specific IP address, or specify a subnet to future-proof the Docker client configuration.`}</p>\n    </InlineNotification>\n    <p>{`The Minikube IP address might change when you run `}<inlineCode parentName=\"p\">{`minikube delete`}</inlineCode>{`. If it changes, you must repeat these steps.`}</p>\n    <p>{`Therefore, reconfirm the Minikube IP and its setting in the `}<inlineCode parentName=\"p\">{`hosts`}</inlineCode>{` file every time you start Minikube, or after you run `}<inlineCode parentName=\"p\">{`minikube delete`}</inlineCode>{`.`}</p>\n    <h2>{`Minikube Ingress`}</h2>\n    <p>{`Ingress is a reverse proxy, which sits in front of the application that is deployed in Kubernetes. It facilitates use of a custom domain name to access a deployed application, instead of using service ports.\nTo enable Ingress for Minikube, you must enable the `}<inlineCode parentName=\"p\">{`ingress`}</inlineCode>{` add-on.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`minikube addons enable ingress\n`}</code></pre>\n    <h2>{`Useful Minikube commands`}</h2>\n    <p>{`Some useful Minikube commands are as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# Sample commands\nminikube status       # See if Minikube is running\nminikube start        # Create and start Minikube\nminikube dashboard    # Access the Kubernetes dashboard running within the Minikube cluster\nminikube ssh          # Login into the Minikube VM\nminikube addons list  # Show the status of the available add-ons\nminikube stop         # Stop Minikube\nminikube delete       # Delete the Minikube VM\nminikube ip           # Show the Minikube IP\n`}</code></pre>\n    <p>{`For a full list of commands, see `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/setup/minikube/\"\n      }}>{`Installing Kubernetes with Minikube`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}